{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { off, on } from './util';\n\nvar noop = function noop() {};\n\nvar usePermission = function usePermission(permissionDesc) {\n  var mounted = true;\n  var permissionStatus = null;\n\n  var _a = useState(''),\n      state = _a[0],\n      setState = _a[1];\n\n  var onChange = function onChange() {\n    if (mounted && permissionStatus) {\n      setState(permissionStatus.state);\n    }\n  };\n\n  var changeState = function changeState() {\n    onChange();\n    on(permissionStatus, 'change', onChange);\n  };\n\n  useEffect(function () {\n    navigator.permissions.query(permissionDesc).then(function (status) {\n      permissionStatus = status;\n      changeState();\n    }).catch(noop);\n    return function () {\n      mounted = false;\n      permissionStatus && off(permissionStatus, 'change', onChange);\n    };\n  }, []);\n  return state;\n};\n\nexport default usePermission;","map":null,"metadata":{},"sourceType":"module"}