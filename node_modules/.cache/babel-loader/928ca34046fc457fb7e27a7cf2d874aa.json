{"ast":null,"code":"import { useMemo, useState } from 'react';\nimport useMountedState from './useMountedState';\n\nvar noop = function noop() {};\n/*\nconst defaultState: DropAreaState = {\n  over: false,\n};\n*/\n\n\nvar createProcess = function createProcess(options, mounted) {\n  return function (dataTransfer, event) {\n    var uri = dataTransfer.getData('text/uri-list');\n\n    if (uri) {\n      (options.onUri || noop)(uri, event);\n      return;\n    }\n\n    if (dataTransfer.files && dataTransfer.files.length) {\n      (options.onFiles || noop)(Array.from(dataTransfer.files), event);\n      return;\n    }\n\n    if (dataTransfer.items && dataTransfer.items.length) {\n      dataTransfer.items[0].getAsString(function (text) {\n        if (mounted) {\n          (options.onText || noop)(text, event);\n        }\n      });\n    }\n  };\n};\n\nvar createBond = function createBond(process, setOver) {\n  return {\n    onDragOver: function onDragOver(event) {\n      event.preventDefault();\n    },\n    onDragEnter: function onDragEnter(event) {\n      event.preventDefault();\n      setOver(true);\n    },\n    onDragLeave: function onDragLeave() {\n      setOver(false);\n    },\n    onDrop: function onDrop(event) {\n      event.preventDefault();\n      event.persist();\n      setOver(false);\n      process(event.dataTransfer, event);\n    },\n    onPaste: function onPaste(event) {\n      event.persist();\n      process(event.clipboardData, event);\n    }\n  };\n};\n\nvar useDropArea = function useDropArea(options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var onFiles = options.onFiles,\n      onText = options.onText,\n      onUri = options.onUri;\n  var isMounted = useMountedState();\n\n  var _a = useState(false),\n      over = _a[0],\n      setOver = _a[1];\n\n  var process = useMemo(function () {\n    return createProcess(options, isMounted());\n  }, [onFiles, onText, onUri]);\n  var bond = useMemo(function () {\n    return createBond(process, setOver);\n  }, [process, setOver]);\n  return [bond, {\n    over: over\n  }];\n};\n\nexport default useDropArea;","map":null,"metadata":{},"sourceType":"module"}